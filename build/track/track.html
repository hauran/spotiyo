<polymer-element name="yo-track" attributes="artist name imgsrc uri number">
<template>
	<style>:host {
  display: block;
  clear: both;
  overflow: hidden;
  background: #34495e;
}
:host .item-name {
  overflow: auto;
}
:host .item-name .artist {
  font-size: 0.6em;
}
:host .item-name .track-name {
  overflow: hidden;
}
:host .item-name img {
  margin-right: 5px;
}
</style>
	<div class="item-name {{ {playing:number==0} | tokenList}}" track="{{number}}" artist="{{artist}}" on-click="{{playTrack}}">
		<img src="{{imgsrc}}" class="pull-left">
		<div class="track-name">
			{{name}}
			<div class="artist">{{artist}}</div>
		</div>
	</div>
</template>

<script built="/Users/rmai/gitrepo/yoplay/src/elements/track/track.coffee">(function e(t, n, r) {
    function s(o, u) {
        if (!n[o]) {
            if (!t[o]) {
                var a = typeof require == "function" && require;
                if (!u && a) return a(o, !0);
                if (i) return i(o, !0);
                throw new Error("Cannot find module '" + o + "'");
            }
            var f = n[o] = {
                exports: {}
            };
            t[o][0].call(f.exports, function(e) {
                var n = t[o][1][e];
                return s(n ? n : e);
            }, f, f.exports, e, t, n, r);
        }
        return n[o].exports;
    }
    var i = typeof require == "function" && require;
    for (var o = 0; o < r.length; o++) s(r[o]);
    return s;
})({
    1: [ function(require, module, exports) {
        Polymer("yo-track", {
            artist: "",
            name: "",
            imgsrc: "",
            uri: "",
            ready: function() {
                this.tracks = document.querySelector("yo-tracks");
                return this.player = document.querySelector("yo-player");
            },
            playTrack: function() {
                var current, err, number, skip;
                current = this.tracks.currentPlaying().number;
                number = this.number;
                skip = Math.abs(number - current);
                this.player.track(this.name, this.artist);
                try {
                    if (this.tracks.isPlaylist) {
                        if (number > current) {
                            return Android.skipForward(skip);
                        } else {
                            return Android.skipBack(skip);
                        }
                    } else {
                        Android.play(this.uri);
                        return this.queueNext();
                    }
                } catch (_error) {
                    err = _error;
                    return console.log(err);
                }
            },
            queueNext: function() {
                var allTracks, found, i, _results;
                found = false;
                allTracks = document.querySelector("yo-tracks").shadowRoot.querySelectorAll("yo-track");
                i = 0;
                _results = [];
                while (i < allTracks.length) {
                    if (found) {
                        this.tracks.queue(allTracks[i].uri);
                    }
                    if (allTracks[i].uri === this.uri) {
                        found = true;
                    }
                    _results.push(i++);
                }
                return _results;
            }
        });
    }, {} ]
}, {}, [ 1 ]);</script>
</polymer-element>
